/*
Plugin: simpleParallax
Version 1.1
Author: Fran√ßois Barrailla, Deo Fetalvero
Twitter: @fransbar
Author URL: http://francoisbarrailla.com
Plugin URL: http://francoisbarrailla.com/resources/simpleparallax
license: http://www.wtfpl.net
Changelog: added a no parallax scenario when image is horizontally longer as a background than element
*/
!function($){function t(t,i){$("<img />").on("load",function(){i(this.width,this.height)}).attr("src",t).error(function(){throw"$.simpleParallax : fail to load the image "+t})}function i(t){var i=t.offset().top-n+t.height()<0,o=t.offset().top>r+n;return!i&&!o}function o(t,o,e){if(i(t))if(t.width()/t.height()<=o.width/o.height)t.css("background-position","50% 50%");else{var a,s=t.width(),h=t.height();if("cover"===t.css("background-size")){var l=s/o.width;a=o.height*l}else a=o.height;var c=h+t.offset().top-n,d=(r+h-c)/(r+h),f=a-h,g="down"===e?f*d+h-a:-(f*d);t.css("background-position","50% "+g+"px")}}var e=$(window),r=e.height(),n=e.scrollTop();e.on("resize",function(){r=e.height(),n=e.scrollTop()}),e.on("scroll",function(){n=e.scrollTop()}),$.fn.simpleParallax=function(i){var i=$.extend($.fn.simpleParallax.defaults,i);return this.each(function(){try{var r=$(this),n=$.extend({},i,r.data()),a;if("up"!==n.dir&&"down"!==n.dir)throw'wrong direction (dir) option setted (must be "up" or "down")';if(r.data("bgi"))a=r.data("bgi"),r.css("backgroundImage","url("+r.data("bgi")+")");else{var s=r.css("background-image").match(/^url\("?(.+?)"?\)$/);if(!s||s.length<1)throw"impossible to extract background-image of element "+this.toString();a=s[1]}t(a,function(t,i){e.on("scroll",function(){o(r,{width:t,height:i},n.dir)}),o(r,{width:t,height:i},n.dir)})}catch(t){console.error("$.simpleParallax : "+t)}})},$.fn.simpleParallax.defaults={dir:"down"}}(jQuery);